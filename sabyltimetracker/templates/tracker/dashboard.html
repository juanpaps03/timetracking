{% extends "base.html" %}
{% load static i18n%}
{% load filters %}

{% block css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock css %}

{% block content %}
<div class="container">

  <div class="big-clock">
    <div class="hero-circle">
			<div class="hero-face">
				<div id="hour" class="hero-hour"></div>
				<div id="minute" class="hero-minute"></div>
				<div id="second" class="hero-second"></div>
			</div>
		</div>
    <div id="clock" class="clock-time col-md-12">
      <p class="date">loading ...</p>
      <p class="time"></p>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      {% if workday %}
        <a href="{% url 'tracker:day_review' request.user.username %}" role="button"><button type="button" class="btn btn-lg btn-outline-info">{% trans "End Day" %}</button></a>
      {% else %}
        <a href="#" role="button"><button type="button" class="btn btn-lg btn-outline-info">{% trans "Start Day" %}</button></a>
      {%  endif %}
    </div>
    <div class="col-md-6">
      <a href="{% url 'tracker:log_hours' request.user.username %}" role="button"><button type="button" class="btn btn-lg btn-outline-warning">{% trans "Log Hours" %}</button></a>
    </div>
  </div>

  <div class="row">
    {%  if workers_missing_hours %}
      {% if workers_missing_hours|length == 1 %}
        <p>{% trans "1 worker is missing hours." %}</p>
        <p>{{ workers_missing_hours|first }} {% trans " needs more hours logged." %}</p>
      {% else %}
        <p>{{ workers_missing_hours|length }} {% trans "workers are missing hours." %}</p>
        <p>{{ workers_missing_hours|ellipsize:3 }} {% trans " need more hours logged." %}</p>
      {% endif %}
    {% else %}
      <p>{% trans "All workers have enough logged hours. When you are sure everything is done, you can end the day." %}</p>
    {% endif %}
  </div>


</div>
{% endblock content%}


{% block javascript %}
  {{ block.super }}
  <script src="https://momentjs.com/downloads/moment.js"></script>
  <script type="text/javascript" src="{% static 'js/dashboard.js' %}"></script>
{% endblock javascript %}
